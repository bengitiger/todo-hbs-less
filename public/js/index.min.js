/*!
 * Studio Riehl -  v1.0.0 (https://github.com/slsriehl/todo-hbs-less#readme)
 * Copyright 2017-2017 Sarah Schieffer Riehl
 * Licensed under  ()
 */
var auth,createCookie,deleteAccount,formToJSON,getDelete,getLogin,getSettings,getSignup,logout,postContexts,postLogin,postPut,postSignup,putSettings,readCookie;createCookie=function(t,e,o){var n,i;return o?(n=new Date,n.setTime(n.getTime()+24*o*60*60*1e3),i="; expires="+n.toGMTString()):i="",document.cookie=t+"="+e+i+"; path=/"},readCookie=function(t){var e,o,n,i,r,u;for(n=" "+document.cookie,e=n.split(";"),console.log(e),i=r=0,u=e.length;r<u;i=++r)if(e[i],o=e[i].split("="),console.log(o),o[0]===" "+t)return console.log(o[1]),o[1];return null},formToJSON=function(t){return[].reduce.call(t,function(t,e){return t[e.name]=e.value,t},{})},getDelete=function(t,e){return t&&t.preventDefault(),e.then(function(t){return console.log(t),$("body").html(t.data)}).catch(function(t){return console.log(t)})},postPut=function(t,e){return t.preventDefault(),e.then(function(t){if(console.log(t),$("body").html(t.data),t.headers.cookie)return createCookie("do-it",t.headers.cookie,3)}).catch(function(t){return console.log(t)})},auth=function(t){var e;return t&&"undefined"!==t?(console.log("auth fired"),e=axios.get("/auth/"+t),getDelete(event,e)):getLogin(null)},getSignup=function(t){var e;return e=axios.get("/user/signup"),getDelete(t,e)},getLogin=function(t){var e;return e=axios.get("/user/login"),getDelete(t,e)},getSettings=function(t){var e,o;return o=readCookie("do-it"),e=axios.get("/user/"+o),getDelete(t,e)},postSignup=function(t){var e,o;return o=formToJSON(t.target.elements),console.log(o),e=axios.post("/user/signup",o),postPut(t,e)},postLogin=function(t){var e,o;return o=formToJSON(t.target.elements),e=axios.post("/user/login",o),postPut(t,e)},putSettings=function(t){var e,o;return o=formToJSON(t.target.elements),o.cookie=readCookie("do-it"),console.log(o),e=axios.put("/user",o),postPut(t,e)},logout=function(t){var e;return e=axios.delete("/user/logout"),getDelete(t,e)},deleteAccount=function(t){var e,o;return o={password:$("#password").val(),cookie:readCookie("do-it")},console.log(o),e=axios.put("/user/delete",o),getDelete(t,e)},postContexts=function(t){var e,o;return o=formToJSON(t.target.elements),console.log(o),e=axios.post("/context",o),postPut(t,e)},$(document).ready(function(){return console.log($("#intro").text().trim()),"Welcome to the do-It task management application"===$("#intro").text().trim()&&auth(readCookie("do-it")),$("#sign-up").click(getSignup),$("#log-in").click(getLogin),$("#settings").click(getSettings),$("#signup-form").submit(postSignup),$("#login-form").submit(postLogin),$("#change-form").submit(putSettings),$("#log-out").click(logout),$("#delete-account").click(deleteAccount),$("#add-context").submit(postContexts)});