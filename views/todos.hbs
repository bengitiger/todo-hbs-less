{{> logged-in}}

{{#if data}}
<div class="data">
	{{data}}
</div>
{{/if}}

<!-- todos -->

<form id="add-todo">
	<input type="text" name="item" placeholder="to-do item" />
	<textarea placeholder="description" name="description"></textarea>
		{{#each userContextItem.contexts}}
		<div>
			<input type="radio" value="{{contextId}}" name="context" />  {{contextName}}
		</div>
		{{/each}}
	<button type="submit">Add New Item</button>
</form>

<form id="add-context">
	<input
		type="text"
		name="name"
		placeholder="new context"
		pattern="^\S{3,}$"
		required
		title="Your context must be at least 3 characters."
	/>
	<button type="submit">Add New Context</button>
</form>

<section>
		{{#each userContextItem.contexts}}
		<div id="{{contextId}}">
		<h3>{{contextName}}</h3>
			{{#each items}}
				<div id="{{itemId}}">
				<h4>{{itemName}}</h4>
					{{#if doneness}}
						<p>complete</p>
					{{else}}
						<p>ready to do!</p>
					{{/if}}
				<p>{{description}}</p>
				<button id="{{itemId}}">Edit Item</button>
				</div>
			{{/each}}
		</div>
		{{/each}}
</section>


<script>
	$('#log-out').click(logout);
	$('#settings').click(getSettings);
	$('#add-context').submit(postContexts);
	$('#add-todo').submit(postItems);
</script>
