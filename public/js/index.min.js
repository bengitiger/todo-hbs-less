/*!
 * Studio Riehl -  v1.0.0 (https://github.com/slsriehl/todo-hbs-less#readme)
 * Copyright 2017-2017 Sarah Schieffer Riehl
 * Licensed under  ()
 */
var auth,createCookie,cruds,deleteAccount,formToJSON,getLogin,getSettings,getSignup,getTodos,hideShow,hideShowSubmit,isValidElement,isValidValue,logout,postContexts,postItems,postLogin,postSignup,putSettings,readCookie,toggleRadios;createCookie=function(e,t,o){var n,i;return o?(n=new Date,n.setTime(n.getTime()+24*o*60*60*1e3),i="; expires="+n.toGMTString()):i="",document.cookie=e+"="+t+i+"; path=/"},readCookie=function(e){var t,o,n,i,s,a;for(n=" "+document.cookie,t=n.split(";"),console.log(t),i=s=0,a=t.length;s<a;i=++s)if(t[i],o=t[i].split("="),console.log(o),o[0]===" "+e)return console.log(o[1]),o[1];return null},isValidElement=function(e){return e.name&&e.value},isValidValue=function(e){return!["checkbox","radio"].includes(e.type)||e.checked},formToJSON=function(e){return[].reduce.call(e,function(e,t){return isValidElement(t)&&isValidValue(t)&&(e[t.name]=t.value),e},{})},cruds=function(e,t){return e&&e.preventDefault(),t.then(function(e){if(console.log(e),$("#content").html(e.data),e.headers.cookie)return createCookie("do-it",e.headers.cookie,3)}).catch(function(e){return console.log(e)})},auth=function(e){var t;return e&&"undefined"!==e?(console.log("auth fired"),t=axios.get("/item",{headers:{clientcookie:e}}),cruds(event,t)):getLogin(null)},getSignup=function(e){var t;return t=axios.get("/user/signup"),cruds(e,t)},getLogin=function(e){var t;return t=axios.get("/user/login"),cruds(e,t)},getSettings=function(e){var t,o;return o=readCookie("do-it"),t=axios.get("/user",{headers:{clientcookie:o}}),cruds(e,t)},postSignup=function(e){var t,o;return hideShowSubmit(),o=formToJSON(e.target.elements),console.log(o),t=axios.post("/user/signup",o),cruds(e,t)},postLogin=function(e){var t,o;return hideShowSubmit(),o=formToJSON(e.target.elements),t=axios.post("/user/login",o),cruds(e,t)},putSettings=function(e){var t,o,n;return hideShowSubmit(),$(".hide-show").parent().find('[name="newPassword"]').attr("type","password"),n=formToJSON(e.target.elements),o=readCookie("do-it"),console.log(n),t=axios.put("/user",n,{headers:{clientcookie:o}}),cruds(e,t)},logout=function(e){var t;return t=axios.delete("/user/logout"),cruds(e,t)},deleteAccount=function(e){var t,o,n;return n={password:$("#password").val()},o=readCookie("do-it"),console.log(n),t=axios.delete("/user",n,{headers:{clientcookie:o}}),cruds(e,t)},postContexts=function(e){var t,o,n;return n=formToJSON(e.target.elements),console.log(n),o=readCookie("do-it"),t=axios.post("/context",n,{headers:{clientcookie:o}}),cruds(e,t)},getTodos=function(e){var t,o;return o=readCookie("do-it"),t=axios.get("/item",{headers:{clientcookie:o}}),cruds(e,t)},postItems=function(e){var t,o,n;return n=formToJSON(e.target.elements),o=readCookie("do-it"),console.log(n),t=axios.post("/item",n,{headers:{clientcookie:o}}),cruds(e,t)},hideShow=function(e){return $(this).hasClass("show")?($(".hide-show span").text("Hide"),$('[name="password"]').attr("type","text"),$('[name="newPassword"]').attr("type","text"),$(".hide-show span").removeClass("show")):($(".hide-show span").text("Show"),$('[name="password"]').attr("type","password"),$('[name="newPassword"]').attr("type","password"),$(".hide-show span").addClass("show"))},hideShowSubmit=function(){return $(".hide-show span").text("Show").addClass("show"),$(".hide-show").parent().find('[name="password"]').attr("type","password")},toggleRadios=function(e){return $(this).hasClass("checked")?($(this).children("input").prop("checked",!1),$(this).removeClass("checked")):($(this).children("input").prop("checked",!0),$(this).addClass("checked"))},$(document).ready(function(){if(console.log($("#intro").text().trim()),"Welcome to the do-It task management application"===$("#intro").text().trim())return auth(readCookie("do-it"))});var Modal,extendDefaults,getModalContent;Modal=function(e){return function(e){var t;return t={className:"fade-and-drop",closeButton:!0,content:"",maxWidth:1e3,minWidth:400,overlay:!0},{options:extendDefaults(t,e),close:function(){var e;return e=this,this.modal.className=this.modal.className.replace(" modal-is-open",""),this.overlay.className=this.overlay.className.replace(" modal-is-open",""),this.modal.addEventListener(this.transitionSelect,function(){return e.modal.parentNode.removeChild(e.modal)}),this.overlay.addEventListener(this.transitionSelect,function(){if(e.overlay.parentNode)return e.overlay.parentNode.removeChild(e.overlay)})},open:function(){if(console.log(this.options),this.buildOut.call(this),this.initializeEvents.call(this),window.getComputedStyle(this.modal).height,this.modal.className=this.modal.className+"  "+(this.modal.offsetHeight>window.innerHeight?"modal-is-open anchored":"modal-is-open"),this.options.overlay)return this.overlay.className=this.overlay.className+" modal-is-open"},buildOut:function(){var e,t,o;return e=this.options.content.innerHTML,o=document.createDocumentFragment(),this.modal=document.createElement("div"),this.modal.className="project-modal "+this.options.className,this.modal.style.minWidth=this.options.minWidth+" px",this.modal.style.maxWidth=this.options.maxWidth+" px",this.options.closeButton&&(this.closeButton=document.createElement("button"),this.closeButton.className="project-close close-button",this.closeButton.innerHTML="<i class='fa fa-times'></i>",this.modal.appendChild(this.closeButton)),this.options.overlay&&(this.overlay=document.createElement("div"),this.overlay.className="project-overlay "+this.options.className,o.appendChild(this.overlay)),t=document.createElement("div"),t.className="project-content",t.innerHTML=e,this.modal.appendChild(t),o.appendChild(this.modal),document.body.appendChild(o)},initializeEvents:function(){if(this.closeButton&&this.closeButton.addEventListener("click",this.close.bind(this)),this.overlay)return this.overlay.addEventListener("click",this.close.bind(this))},transitionSelect:function(){var e;return e=document.createElement("div"),e.style.WebkitTransition?"webkitTransitionEnd":e.style.OTransition?"oTransitionEnd":void 0}}}}(),extendDefaults=function(e,t){var o,n,i;for(o=0,n=t.length;o<n;o++)i=t[o],t.hasOwnProperty(i)&&(e[i]=t[i]);return e},getModalContent=function(e){return axios.get("/editItemModal/"+e).then(function(e){var t,o;return o={content:e.data},t=new Modal(o),t.open()}).catch(function(e){return console.log(e),e})};